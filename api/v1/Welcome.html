<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
      integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="Main.css" />

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <title>Eridian</title>
  </head>

  <body>
    <h6>WELCOME TO</h6>
    <div id="box">
      <h5>ERIDIAN ESPORTS</h5>
      <p>Everything else is just Gaming!!!</p>
      <div class="text">
        <span
          >Lorem ipsum dolor sit, amet consectetur adipisicing elit. Eligendi
          dolorum fuga doloribus tempore iste aspernatur magni sint maxime
          voluptatum! Eius beatae iusto sit laborum porro perspiciatis nisi
          corrupti corporis veniam?
        </span>
        <span
          >Lorem ipsum dolor sit, amet consectetur adipisicing elit. Eligendi
          dolorum fuga doloribus tempore iste aspernatur magni sint maxime
          voluptatum! Eius beatae iusto sit laborum porro perspiciatis nisi
          corrupti corporis veniam?
        </span>
        <span
          >Lorem ipsum dolor sit, amet consectetur adipisicing elit. Eligendi
          dolorum fuga doloribus tempore iste aspernatur magni sint maxime
          voluptatum! Eius beatae iusto sit laborum porro perspiciatis nisi
          corrupti corporis veniam?
        </span>
      </div>
      <div class="layout1">
        <a href="#" class="button" data-toggle="modal" data-target="#loginModel"
          >LOGIN</a
        >
        <a
          href="#"
          class="button"
          data-toggle="modal"
          data-target="#signupModel"
          >SIGNUP</a
        >
      </div>

      <!-- Login Model -->
      <!-- Modal -->
      <div
        class="modal fade"
        id="loginModel"
        tabindex="-1"
        aria-labelledby="loginModelLabel"
        aria-hidden="true"
      >
        <div
          class="mx-auto modal-dialog-centered"
          style="
            height: 90vh !important;
            width: 90vw !important;
            margin-top: 3vh !important;
          "
        >
          <div
            class="modal-content"
            style="height: 100% !important; width: 100% !important"
          >
            <!-- Modal Body Starts here -->
            <div
              class="modal-body bg-secondary"
              style="height: 100% !important; width: 100% !important"
            >
              <div
                class="container-fluid"
                style="height: 100% !important; width: 100% !important"
              >
                <form
                  id="login_form"
                  class="d-flex flex-column justify-content-around mt-3"
                  style="height: 100% !important; width: 100% !important"
                >
                  <h5
                    class="modal-title"
                    id="loginModelLabel"
                    style="
                      font-family: 'Segoe UI', Tahoma, Geneva, Verdana,
                        sans-serif;
                      background: transparent;
                    "
                  >
                    Eridian Esports
                  </h5>

                  <div
                    class="d-flex flex-column h-25 justify-content-around w-50 mx-auto"
                  >
                    <input
                      id="email"
                      name="email"
                      type="email"
                      class="form-control mt-3"
                      placeholder="youremail@gmail.com"
                    />
                    <input
                      id="password"
                      name="password"
                      type="password"
                      class="form-control mt-3"
                      placeholder="Your Password"
                    />
                  </div>
                  <div class="d-flex flex-row justify-content-center">
                    <button type="submit" class="btn btn-secondary" id="submit">
                      Login
                    </button>
                  </div>
                </form>
              </div>
            </div>
            <!-- Modal body ends here -->
          </div>
        </div>
      </div>

      <!-- SignUp Model -->
      <!-- Modal -->
      <div
        class="modal fade"
        id="signupModel"
        tabindex="-1"
        aria-labelledby="signupModelLabel"
        aria-hidden="true"
      >
        <div
          class="mx-auto modal-dialog-centered"
          style="
            height: 90vh !important;
            width: 90vw !important;
            margin-top: 3vh !important;
          "
        >
          <div
            class="modal-content"
            style="height: 100% !important; width: 100% !important"
          >
            <!-- Modal Body Starts here -->
            <div
              class="modal-body bg-secondary"
              style="height: 100% !important; width: 100% !important"
            >
              <div
                class="container-fluid"
                style="height: 100% !important; width: 100% !important"
              >
                <form
                  id="signup_form"
                  enctype="multipart/form-data"
                  method="POST"
                  class="d-flex flex-column justify-content-around mt-3"
                  style="height: 100% !important; width: 100% !important"
                >
                  <h5
                    class="modal-title"
                    id="loginModelLabel"
                    style="
                      font-family: 'Segoe UI', Tahoma, Geneva, Verdana,
                        sans-serif;
                      background: transparent;
                    "
                  >
                    Eridian Esports
                  </h5>
                  <div
                    class="d-flex flex-column h-25 justify-content-around w-50 mx-auto"
                  >
                    <input
                      id="usertag"
                      name="usertag"
                      type="text"
                      class="form-control mt-3"
                      placeholder="username"
                    />
                    <input
                      id="email"
                      name="email"
                      type="email"
                      class="form-control mt-3"
                      placeholder="youremail@something.com"
                    />
                    <input
                      id="password1"
                      name="password"
                      type="password"
                      class="form-control mt-3"
                      placeholder="Your Password"
                    />
                    <input
                      id="confirm_password"
                      name="confirm_password"
                      type="password"
                      class="form-control mt-3"
                      placeholder="Confirm Password"
                    />
                  </div>
                  <div class="d-flex flex-row justify-content-center">
                    <button type="submit" id="submit" class="btn btn-secondary">
                      Signup
                    </button>
                  </div>
                </form>
              </div>
            </div>
            <!-- Modal body ends here -->
          </div>
        </div>
      </div>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
      crossorigin="anonymous"
    ></script>

    <script>
      $(document).ready(function () {
        // function to make form values to json format
        $.fn.serializeObject = function () {
          var o = {};
          var a = this.serializeArray();
          $.each(a, function () {
            if (o[this.name] !== undefined) {
              if (!o[this.name].push) {
                o[this.name] = [o[this.name]];
              }
              o[this.name].push(this.value || "");
            } else {
              o[this.name] = this.value || "";
            }
          });
          return o;
        };
        // trigger when login form is submitted
        $(login_form).submit(function () {
          // get form data
          var login_form = $(this);
          var form_data = JSON.stringify(login_form.serializeObject());

          // submit form data to api
          $.ajax({
            url: "login.php",
            type: "POST",
            contentType: "application/json",
            data: form_data,
            success: function (result) {
              alert("Login Successful");
            },
            error: function () {
              alert("Login Failed");
            },
          });

          return false;
        });
        $(signup_form).submit(function (e) {
          e.preventDefault();

          var password = $("#password1").val();
          var confirmpassword = $("#confirm_password").val();

          if (password == confirmpassword) {           

            var formData = new FormData(signup_form);
            formData.append("create", "true");
            formData.delete("confirm_password");

            $.ajax({
              url: "users.php",
              type: "POST",
              data: formData,
              contentType: false,
              processData: false,
              success: function () {
                alert("Sign Up Successful");
              },
              error: function () {
                alert("Sign Up Failed");
              },
            });
            return false;
          } else {
            alert("Passwords did not match");
          }
        });
      });
    </script>
  </body>
</html>
